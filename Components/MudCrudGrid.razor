@typeparam T where T : class
@inject IGridDataService<T> DataService
@using MoonMud.DemoApp.Models
@using MoonMud.DemoApp.Service
@using XmpCore.Options

<MudText Typo="Typo.h4" GutterBottom="true">Assets</MudText>
<MudText Typo="Typo.body1" Class="mb-8">@Options.Title</MudText>

<MudDataGrid T="T" @ref="_dataGrid" MultiSelection="true" SortMode="SortMode.Multiple"
             Hideable="true" RowsPerPage="@_pageSize" ServerData="DataService.LoadData"
             ShowMenuIcon="true">
    <Columns>
        @foreach (var column in Columns)
        {
            <PropertyColumn Property="column.Property" Title="@column.Title"/>
        }
    </Columns>

    <PagerContent>
        <MudDataGridPager T="T" PageSizeOptions="new[] { 10, 30, 50 }"/>
    </PagerContent>
</MudDataGrid>

@code {
    [Parameter] public string Title { get; set; } = "Grid Title";
    [Parameter] public string Subtitle { get; set; } = "Grid Subtitle";
    [Parameter] public IEnumerable<GridColumn<T>> Columns { get; set; } = [];
    [Parameter] public DataGridOptions Options { get; set; }
    
    private MudDataGrid<T> _dataGrid = null!;
    private int _pageSize = 10;
}
